{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["serverActionReducer","fetchServerAction","state","actionId","actionArgs","body","encodeReply","res","fetch","method","headers","Accept","RSC_CONTENT_TYPE_HEADER","NEXT_ROUTER_STATE_TREE","JSON","stringify","tree","process","env","__NEXT_ACTIONS_DEPLOYMENT_ID","NEXT_DEPLOYMENT_ID","nextUrl","NEXT_URL","location","get","revalidatedParts","revalidatedHeader","parse","paths","tag","cookie","e","redirectLocation","URL","addBasePath","window","origin","undefined","isFlightResponse","response","createFromFetch","Promise","resolve","callServer","actionFlightData","actionResult","action","mutable","cache","reject","href","canonicalUrl","currentTree","isForCurrentTree","previousTree","handleMutable","inFlightServerAction","createRecordFromThenable","flightData","readRecordValue","actionResultResolved","handleExternalUrl","pushRef","pendingPush","flightDataPath","length","console","log","treePatch","newTree","applyRouterStatePatchToTree","Error","isNavigatingToNewRootLayout","subTreeData","head","slice","status","CacheStates","READY","fillLazyItemsTillLeafWithHead","prefetchCache","Map","patchedTree","newHref","createHrefFromUrl","value"],"mappings":"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"}