{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["callServer","NEXT_ROUTER_STATE_TREE","NEXT_URL","RSC_CONTENT_TYPE_HEADER","createRecordFromThenable","readRecordValue","createFromFetch","encodeReply","addBasePath","createHrefFromUrl","handleExternalUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","CacheStates","handleMutable","fillLazyItemsTillLeafWithHead","fetchServerAction","state","actionId","actionArgs","body","res","fetch","method","headers","Accept","JSON","stringify","tree","process","env","__NEXT_ACTIONS_DEPLOYMENT_ID","NEXT_DEPLOYMENT_ID","nextUrl","location","get","revalidatedParts","revalidatedHeader","parse","paths","tag","cookie","e","redirectLocation","URL","window","origin","undefined","isFlightResponse","response","Promise","resolve","actionFlightData","actionResult","serverActionReducer","action","mutable","cache","reject","href","canonicalUrl","currentTree","isForCurrentTree","previousTree","inFlightServerAction","flightData","actionResultResolved","pushRef","pendingPush","flightDataPath","length","console","log","treePatch","newTree","Error","subTreeData","head","slice","status","READY","prefetchCache","Map","patchedTree","newHref","value"],"mappings":"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"}