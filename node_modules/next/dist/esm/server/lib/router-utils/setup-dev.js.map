{"version":3,"sources":["../../../../src/server/lib/router-utils/setup-dev.ts"],"names":["fs","url","path","qs","Watchpack","loadEnvConfig","isError","findUp","buildCustomRoute","Log","HotReloader","matchNextPageBundleRequest","traceGlobals","loadJsConfig","createValidFileMatcher","eventCliSession","getDefineEnv","logAppDirError","getSortedRoutes","getStaticInfoIncludingLayouts","verifyTypeScriptSetup","verifyPartytownSetup","getRouteRegex","normalizeAppPath","buildDataRoute","getRouteMatcher","normalizePathSep","createClientRouterFilter","absolutePathToPage","generateInterceptionRoutesRewrites","APP_BUILD_MANIFEST","APP_PATHS_MANIFEST","BUILD_MANIFEST","CLIENT_STATIC_FILES_PATH","COMPILER_NAMES","DEV_CLIENT_PAGES_MANIFEST","DEV_MIDDLEWARE_MANIFEST","NEXT_FONT_MANIFEST","PAGES_MANIFEST","PHASE_DEVELOPMENT_SERVER","getMiddlewareRouteMatcher","NextBuildContext","isMiddlewareFile","NestedMiddlewareError","isInstrumentationHookFile","getPossibleMiddlewareFilenames","getPossibleInstrumentationHookFilenames","createOriginalStackFrame","getErrorSource","getSourceById","parseStack","mkdir","readFile","writeFile","PageNotFoundError","srcEmptySsgManifest","verifyTypeScript","opts","usingTypeScript","verifyResult","dir","distDir","nextConfig","intentDirs","pagesDir","appDir","filter","Boolean","typeCheckPreflight","tsconfigPath","typescript","disableStaticImages","images","hasAppDir","hasPagesDir","version","startWatcher","useFileSystemPublicRoutes","join","set","validFileMatcher","pageExtensions","renderWorkers","propagateToWorkers","field","args","app","propagateServerField","pages","hotReloader","turbo","loadBindings","require","bindings","jsConfig","project","createProject","projectPath","rootPath","experimental","outputFileTracingRoot","watch","env","process","iter","entrypointsSubscribe","curEntries","Map","globalEntries","undefined","document","error","handleEntries","entrypoints","pagesAppEndpoint","pagesDocumentEndpoint","pagesErrorEndpoint","clear","pathname","route","routes","type","info","catch","err","console","exit","e","buildManifests","appBuildManifests","pagesManifests","appPathsManifests","mergeBuildManifests","manifests","manifest","devFiles","ampDevFiles","polyfillFiles","lowPriorityFiles","rootMainFiles","ampFirstPages","m","Object","assign","length","mergeAppBuildManifests","mergePagesManifests","processResult","result","global","_nextDeleteCache","serverPaths","map","p","concat","resolve","issue","issues","severity","filePath","title","description","clearCache","writeBuildManifest","buildManifest","values","buildManifestPath","JSON","stringify","content","__rewrites","afterFiles","beforeFiles","fallback","fromEntries","keys","sortedPages","buildManifestJs","writeAppBuildManifest","appBuildManifest","appBuildManifestPath","writePagesManifest","pagesManifest","pagesManifestPath","writeAppPathsManifest","appPathsManifest","appPathsManifestPath","writeMiddlewareManifest","middlewareManifestPath","sortedMiddleware","middleware","functions","writeOtherManifests","loadableManifestPath","fontManifestPath","appUsingSizeAdjust","pagesUsingSizeAdjust","recursive","Proxy","get","_target","prop","_receiver","ensureOpts","page","match","definition","loadPartialManifest","name","pageName","isApp","isRoute","manifestPath","posix","parse","loadBuildManifest","loadAppBuildManifest","loadPagesManifest","loadAppPathManifest","routeHandler","writeToDisk","Error","writtenEndpoint","endpoint","htmlEndpoint","req","_res","startsWith","params","decodedPagePath","param","decodeURIComponent","ensurePage","clientOnly","finished","config","buildId","telemetry","rewrites","fsChecker","previewProps","prerenderManifest","preview","start","nextScriptWorkers","ensureCallback","ensure","item","itemPath","resolved","prevSortedRoutes","serverFields","Promise","reject","readdir","_","files","directories","rootDir","nestedMiddleware","envFiles","file","push","tsconfigPaths","wp","ignored","some","d","fileWatchTimes","enabledTypeScript","previousClientRouterFilters","previousConflictingPagePaths","Set","on","middlewareMatchers","routedPages","knownFiles","getTimeInfoEntries","appPaths","pageNameSet","conflictingAppPagePaths","appPageFilePaths","pagesPageFilePaths","envChange","tsconfigChange","conflictingPageChange","hasRootAppNotFound","appFiles","pageFiles","fileName","meta","includes","watchTime","watchTimeChange","timestamp","endsWith","accuracy","isPageFile","isAppPath","isPagePath","rootFile","extensions","keepIndex","pagesType","staticInfo","pageFilePath","isDev","isInsideAppDir","output","actualMiddlewareFile","matchers","regexp","originalSource","instrumentationHook","hasInstrumentationHook","actualInstrumentationHookFile","isRootNotFound","isAppRouterPage","originalPageName","replace","add","nextDataRoutes","has","test","numConflicting","size","errorMessage","appPath","relative","pagesPath","setHmrServerError","clearHmrServerError","clientRouterFilters","clientRouterFilter","clientRouterFilterRedirects","_originalRedirects","r","internal","clientRouterFilterAllowedRate","then","dev","forceReload","silent","tsconfigResult","activeConfigs","forEach","idx","isClient","isNodeServer","isEdgeServer","hasRewrites","plugins","plugin","jsConfigPlugin","resolvedBaseUrl","currentResolvedBaseUrl","resolvedUrlIndex","modules","findIndex","splice","compilerOptions","paths","key","definitions","__NEXT_DEFINE_ENV","newDefine","invalidate","reloadAfterInvalidation","message","appPathRoutes","entries","k","v","sort","hasAppNotFound","middlewareMatcher","interceptionRoutes","basePath","caseSensitiveRoutes","exportPathMap","outDir","value","source","destination","query","sortedRoutes","dynamicRoutes","regex","re","groups","routeRegex","toString","i18n","RegExp","dataRouteRegex","every","val","send","devPagesManifest","warn","startTime","clientPagesManifestPath","devVirtualFsItems","devMiddlewareManifestPath","requestHandler","res","parsedUrl","statusCode","setHeader","end","logErrorWithOriginalStack","usedOriginalStack","stack","frames","frame","find","lineNumber","moduleId","modulePath","src","isEdgeCompiler","edgeServer","compilation","edgeServerStats","serverStats","sep","originalFrame","line","column","rootDirectory","serverCompilation","edgeCompilation","originalCodeFrame","originalStackFrame","methodName","ensureMiddleware","setupDev","isSrcDir","record","webpackVersion","turboFlag","cliCommand","isCustomServer","hasNowJson","cwd"],"mappings":"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"}