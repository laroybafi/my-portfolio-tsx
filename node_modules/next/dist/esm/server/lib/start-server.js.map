{"version":3,"sources":["../../../src/server/lib/start-server.ts"],"names":["http","isIPv6","initialEnv","Log","setupDebug","splitCookiesString","toNodeOutgoingHttpHeaders","getCloneableBody","filterReqHeaders","ipcForbiddenHeaders","setupCompression","normalizeRepeatedSlashes","invokeRequest","isAbortError","pipeReadable","genRouterWorkerExecArgv","getDebugPort","getNodeOptionsWithoutInspect","signalFromNodeResponse","debug","checkIsNodeDebugging","process","isNodeDebugging","execArgv","some","localArg","startsWith","env","NODE_OPTIONS","match","createRouterWorker","routerServerPath","jestWorkerPath","require","resolve","Worker","numWorkers","maxRetries","forkOptions","undefined","FORCE_COLOR","NEXT_CPU_PROF","__NEXT_PRIVATE_CPU_PROFILE","WATCHPACK_WATCHER_LIMIT","EXPERIMENTAL_TURBOPACK","exposedMethods","startServer","dir","nextConfig","prevDir","port","isDev","hostname","useWorkers","minimalMode","allowRetry","keepAliveTimeout","onStdout","onStderr","logReady","sockets","Set","worker","routerPort","handlersReady","handlersError","handlersPromise","Promise","reject","requestHandler","_req","_res","Error","upgradeHandler","_socket","_head","server","createServer","req","res","add","on","delete","err","statusCode","end","error","url","console","socket","head","destroy","portRetryCount","code","warn","listen","exit","targetHost","addr","address","host","normalizedHostname","appUrl","debugPort","info","ready","PORT","httpProxy","replace","routerWorker","cleanup","curWorker","_workerPool","_workers","_child","kill","didInitialize","_worker","signal","workerStdout","getStdout","workerStderr","getStderr","data","stdout","write","stderr","initializeResult","initialize","dev","workerType","compress","getProxyServer","pathname","targetUrl","proxyServer","createProxy","target","changeOrigin","ignorePath","xfwd","ws","followRedirects","_err","proxyRes","innerReq","innerRes","cleanupProxy","removeListener","once","urlParts","split","urlNoQuery","cleanUrl","setHeader","invokeRes","headers","method","cloneBodyStream","e","status","statusMessage","statusText","key","value","Object","entries","curValue","getHeader","newValue","cookie","Array","isArray","push","val","body","proxyReq","next","app","httpServer","customServer","getRequestHandler","getUpgradeHandler","prepare","teardown","close","forEach"],"mappings":"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"}