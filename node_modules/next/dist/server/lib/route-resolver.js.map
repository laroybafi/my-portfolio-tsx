{"version":3,"sources":["../../../src/server/lib/route-resolver.ts"],"names":["makeResolver","debug","setupDebug","dir","nextConfig","middleware","serverAddr","fsChecker","setupFsCheck","dev","minimalMode","config","appDir","pagesDir","findPagesDir","experimental","ensureCallback","item","result","type","Error","findPageFile","itemPath","pageExtensions","distDir","path","join","middlewareInfo","name","paths","files","map","file","process","cwd","wasm","assets","middlewareServerPort","Promise","resolve","srv","http","createServer","req","res","cloneableBody","getCloneableBody","run","require","edgeFunctionEntry","request","headers","method","i18n","basePath","trailingSlash","url","hostname","port","body","signal","signalFromNodeResponse","useCache","onWarning","console","warn","key","value","response","toLowerCase","delete","cookies","splitCookiesString","cookie","append","Object","entries","toNodeOutgoingHttpHeaders","undefined","setHeader","statusCode","status","pipeReadable","end","err","error","on","address","listen","length","middlewareMatcher","getMiddlewareRouteMatcher","matcher","regexp","originalSource","resolveRoutes","getResolveRoutes","isNodeDebugging","workerType","pages","initialize","deleteCache","clearModuleContext","deleteAppClientCache","propagateServerField","resolveRoute","routeResult","Set","matchedOutput","bodyStream","parsedUrl","resHeaders","finished","pathname","query","keys","destination","format","PERMANENT_REDIRECT_STATUS","protocol","getRequestMeta","proxyRequest","cloneBodyStream","proxyTimeout"],"mappings":"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"}